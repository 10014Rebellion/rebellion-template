#!/bin/sh

if [ ! -f ./gradlew ]; then
  echo "Error: Gradle wrapper not found. Please run this script from the root of the project."
  exit 1
fi

echo ""
echo "Checking if spotless needs to be run..."
./gradlew spotlessCheck
if [ $? -ne 0 ]; then
  echo "Spotless check failed. Running spotlessApply to fix formatting issues..."
  ./gradlew spotlessApply
  echo "Error: Spotless has fixed the formatting issues. Please review the changes before committing."
  exit 1
fi

echo ""
exit 0
